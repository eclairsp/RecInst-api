<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Upload</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>
<body>
    <h1>Upload the audio file</h1>
    <form method="post" enctype="multipart/form-data" >
        <label class="btn btn-default btn-file">
            Browse <input id="fileinput" type="file" name="audio" style="display: none;">
        </label>
    </form>
    
    <button id="btn" class="btn btn-primary">Upload your audio</button>
</body>

<script>

// Select your input type file and store it in a variable
const input = document.getElementById('fileinput');
const btn = document.getElementById('btn')

// This will upload the file after having read it
const upload = (file) => {
    console.log(file)
    let formData = new FormData();
    formData.append('files', file)
    fetch('http://localhost:5000/upload', { // Your POST endpoint
        method: 'POST',
        body: formData // This is your file object
    }).then(
    function(response) {
      if (response.status !== 200) {
        console.log('Looks like there was a problem. Status Code: ' +
          response.status);
        return;
      }

      // Examine the text in the response
      response.json().then(function(data) {
        console.log(data);
      });
    }
  )
};

// Event handler executed when a file is selected
const onSelectFile = () => {
    upload(input.files[0]);
}
// Add a listener on your input
// It will be triggered when a file will be selected
btn.addEventListener('click', onSelectFile, false);

</script>
</html>